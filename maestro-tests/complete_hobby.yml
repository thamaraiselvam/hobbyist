appId: tham.hobbyist.app
---
# Complete Hobby Flow: Dashboard → tap daily hobby checkbox → verify completion
# Keys used: TestKeys.taskCheckbox(hobby.id) = 'hobby_checkbox_<id>'
#
# NOTE: hobby.id is a timestamp generated at creation time.
# This test uses regex 'hobby_checkbox_.*' to match the first available checkbox.
# Daily hobbies always appear in the list regardless of day, so the first match
# is expected to be a daily task. Requires hobbies to exist (run add_hobby flows first).
#
# The hobby is LEFT in the Completed state intentionally so that view_analytics.yml
# can verify that completed data is reflected in the analytics screen.
#
# Before running, ensure app is on the dashboard:
#   adb shell am start -n tham.hobbyist.app/.MainActivity

- extendedWaitUntil:
    visible:
      text: "In Progress"
    timeout: 5000

# Tap the checkbox for the first available daily hobby
- tapOn:
    id: "hobby_checkbox_.*"

# Wait for animated checkbox to complete
- waitForAnimationToEnd

# Scroll down to expose the Completed section.
# After one task is marked done the "Completed Today" header appears below
# the remaining In Progress tasks and can sit below the visible viewport.
- scroll

# Use extendedWaitUntil instead of assertVisible: the list re-render fires
# in the same frame as setState() but Maestro may poll before it paints.
# The header reads "Completed Today" when the selected day is today (anchored
# regex — bare "Completed" would not match "Completed Today").
- extendedWaitUntil:
    visible:
      text: "Completed.*"
    timeout: 5000
